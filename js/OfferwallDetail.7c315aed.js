(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["OfferwallDetail"],{b28f:function(t,e,s){t.exports=s.p+"img/img_badge_complete.77f8b661.png"},e598:function(t,e,s){"use strict";s.r(e);var i=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"container-a"},[s("div",{ref:"banner",staticClass:"banner"},[s("a",[s("img",{attrs:{src:t.banner,alt:"이벤트 배너"}})])]),s("div",{staticClass:"section-list"},[s("section",{staticClass:"section section-description"},[s("h2",{staticClass:"title"},[t._v(t._s(t.detailInfo.title))]),s("p",{domProps:{innerHTML:t._s(t.detailInfo.titleDesc)}}),s("div",{staticClass:"btn-area"},[t.vLogData&&t.detailInfo.status===t.PromotionStatus.BASIC?s("div",{directives:[{name:"stlog",rawName:"v-stlog:serviceType",value:{join:t.vLogData},expression:"{join: vLogData}",arg:"serviceType"}],staticClass:"btn fluid primary",class:{"is-fixed":t.isFixed},attrs:{"data-fixed-btn":""},on:{click:function(e){return e.preventDefault(),t.joinPromotion()}}},[s("span",[t._v(t._s(t.$t("common.Promotion.participation")))]),s("i",{staticClass:"ico ico-arrow-right"})]):s("div",{staticClass:"btn fluid",class:[{"is-fixed":t.isFixed},t.detailInfo.btnStatus.class],attrs:{"data-fixed-btn":"",disabled:t.detailInfo.btnStatus.disable}},[s("span",[t._v(t._s(t.detailInfo.btnStatus.text))])])])]),s("section",{staticClass:"section"},[s("div",{staticClass:"d-day_area"},[s("h2",{staticClass:"title"},[t._v(t._s(t.$t("common.Promotion.reward_join"))+" "),s("sup",[t._v(t._s(t.detailInfo.gameName))])]),s("div",{staticClass:"reward-notice",class:{center:t.isCPQ}},[s("div",{staticClass:"inner"},[s("span",{staticClass:"col",class:{one:t.isCPQ},domProps:{innerHTML:t._s(t.detailInfo.remainTermsText)}}),t.isCPQ?t._e():s("span",{staticClass:"col right"},[t._v(t._s(t.$t("common.Promotion.remain_amount"))+" : "+t._s(t.detailInfo.remainReward))])])])]),s("ul",{class:[t.questStyle]},t._l(t.questList,(function(t,e){return s("reward-item",{key:e,attrs:{questItem:t}})})),1)]),s("section",{staticClass:"section"},[s("h2",{staticClass:"title"},[t._v(t._s(t.$t("common.Promotion.join_way")))]),s("p",{domProps:{innerHTML:t._s(t.detailInfo.guideDesc)}})])]),s("back-button")],1)},a=[],o=s("9ab4"),n=s("60a3"),r=s("8c0e"),c=s("cb7a"),l=s("aab0"),u=s("52c9"),m=s("3be0"),d=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("nav",{staticClass:"fixed-nav"},[s("router-link",{staticClass:"btn-back",attrs:{to:"/"}})],1)},p=[],f=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o["d"](e,t),e.prototype.goPromotionList=function(){this.$router.push({path:"/"})},e=o["c"]([n["a"]],e),e}(r["a"]),h=f,v=h,g=s("2877"),I=Object(g["a"])(v,d,p,!1,null,null,null),b=I.exports,C=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("li",{staticClass:"reward-list-item"},[s("img",{attrs:{src:t.rewardInfo.image}}),s("div",{staticClass:"text"},[s("strong",[t._v(t._s(t.rewardTitle))]),t.questItem.questKey?t._e():s("span",[t._v(t._s(t.rewardInfo.item))])]),t.questItem.questKey?s("div",{staticClass:"text"},[s("span",{staticClass:"line"},[t._v(t._s(t.rewardInfo.item))]),s("span",{staticClass:"line"},[t._v(t._s(t.$t("common.Promotion.remain_amount"))+" : "),s("em",[t._v(t._s(t.rewardInfo.count))])])]):t._e()])},_=[],w=s("cab0"),y=s("4c9c"),L=s("b28f"),S=s.n(L),E=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.rewardTitle="",e.rewardInfo={image:"",item:null,count:0},e}return o["d"](e,t),e.prototype.created=function(){this.setRewardInfo()},e.prototype.onChangeItem=function(){this.setRewardInfo()},e.prototype.getRewardItem=function(t){var e="";if(t.rewardType===y["o"].ITEM){var s=l["a"].i18n.locale,i=s,a=["ko","ja"];e=a.includes(i)?t.rewardDesc+" "+w["a"].getRemainReward(t.rewardCnt):w["a"].getRemainReward(t.rewardCnt)+" "+t.rewardDesc}return e},e.prototype.setRewardInfo=function(){var t=this.questItem.rewardList,e=null;e=t?{image:t[0].resourceId,item:this.getRewardItem(t[0]),count:w["a"].getRemainReward(this.questItem.completeCnt)}:{image:this.questItem.resourceId,item:this.getRewardItem(this.questItem),count:w["a"].getRemainReward(this.questItem.completeCnt)},this.questItem.status===y["k"].COMPLETE&&(e.image="",e.image=S.a),this.rewardInfo=e,this.rewardTitle=this.questItem.rewardList?this.questItem.rewardList[0].rewardTerms:""},o["c"]([Object(n["b"])({type:Object,default:{}})],e.prototype,"questItem",void 0),o["c"]([Object(n["c"])("questItem")],e.prototype,"onChangeItem",null),e=o["c"]([n["a"]],e),e}(r["a"]),D=E,O=D,P=Object(g["a"])(O,C,_,!1,null,null,null),R=P.exports,T=s("d257"),x=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.detailInfo={status:"",gameName:"",title:"",titleDesc:"",guideDesc:"",remainTime:{time:"",text:""},btnStatus:{class:"",text:"",disable:!1},remainReward:"",remainTermsText:""},e.PromotionStatus=y["k"],e.adItem=new m["a"],e.banner="",e.questList=[],e.questStyle="",e.isCPQ=!1,e.isFixed=!1,e.vLogData={},e}return o["d"](e,t),e.prototype.created=function(){var t=this;this.defaultSetting(),this.subscribe(this.questListService.questList$,(function(e){t.setDetailInfo(e)}),(function(t){console&&console.log&&console.log("OfferwallDetail::questListService.questList$",t)})),this.subscribe(this.joinService.join$,(function(e){t.checkJoinStatus(e)}),(function(e){console&&console.log&&t.openAlert(l["a"].i18n.t("common.Modal.impossible_complete"))})),this.vLogData=Object.assign({},this.adItem,T["b"].getUserInfo())},e.prototype.mounted=function(){window.addEventListener("scroll",this.scrollEvent)},e.prototype.beforeDestroy=function(){this.removeEvents(),this.removeOfferwallInfo()},e.prototype.defaultSetting=function(){if(this.adItem=T["c"].getOfferwallInfo(),this.isCPQ=this.adItem&&this.adItem.category===y["i"].CPQ,this.isCPQ){var t=this.$route.params.adKey;this.questListService.retrieveQuestList(t),this.setDetailInfo(this.adItem)}else this.setDetailInfo(this.adItem)},e.prototype.setBtnStatus=function(t){var e={class:"",text:"",disable:!1};return t===y["k"].JOIN?(e.class=y["c"].JOIN,e.text=l["a"].i18n.t("common.Promotion.ing"),e.disable=!1):t===y["k"].COMPLETE&&(e.class=y["c"].COMPLETE,e.text=l["a"].i18n.t("common.Promotion.complete"),e.disable=!0),e},e.prototype.setDetailInfo=function(t){if(t){var e=this.adItem?this.adItem.rewardServiceName:"";if(this.banner=t&&t.adBanner?t.adBanner.resource:t.resource,this.detailInfo={status:t.status,gameName:e,title:t.title,titleDesc:T["a"].getContentText(T["a"].getReplaceAll(t.description),e),guideDesc:T["a"].getContentText(T["a"].getReplaceAll(t.guide.description),e),remainTime:T["d"].convertRemainTime(t.endDate),btnStatus:this.setBtnStatus(t.status),remainReward:T["a"].getRemainReward(t.remainCount),remainTermsText:T["d"].convertRemainTermsText(t.endDate,this.isCPQ)},t.category){var s=t.rewardList,i=t.status;s&&s.length>0&&s.map((function(t){return t.status=i})),t.category===y["i"].CPA&&(s.guide=t.guide)}this.questList=t&&t.category?t.rewardList:t.questList,this.questStyle=this.adItem.category&&this.adItem.category!==y["i"].CPQ?y["l"].CPE:y["l"].CPQ,this.setEventLogData(t)}},e.prototype.setEventLogData=function(t){var e=t.adBanner?t.adBanner.resourceId:t.resourceId;T["b"].setCookie(y["m"],e),T["b"].setCookie(y["n"],y["g"].OFFERWALL)},e.prototype.scrollEvent=function(){var t=this.$refs.banner,e=t.offsetHeight;this.isFixed=window.scrollY>e},e.prototype.hasMemberNo=function(){var t=this.userService.user;return t&&t.memberNo},e.prototype.joinPromotion=function(){if(this.hasMemberNo()){var t=this.adItem.adKey,e=this.adItem.category,s=this.adItem.resourceId;this.joinService.retrieveJoin(t,e,s)}else this.$router.push({path:"/network-error"})},e.prototype.checkJoinStatus=function(t){switch(t.joinType){case y["h"].SUCCESS:this.getCompleteList(),this.isCPE(this.adItem.category)?this.goStore(t.actionUri):this.goOfferWallMain();break;case y["h"].NONE_EXIST:this.openAlert(l["a"].i18n.t("common.Modal.no_event"));break;case y["h"].ALREADY_JOIN:this.openAlert(l["a"].i18n.t("common.Modal.event_complete"));break;case y["h"].ALREADY_COMPLETE:var e=l["a"].i18n.t("common.Modal.game_event_complete",{gameName:t.serviceName}),s=l["a"].i18n.t("common.Modal.event_complete");t.serviceName?this.openAlert(e):this.openAlert(s);break;case y["h"].DUPLICATE:this.openAlert(l["a"].i18n.t("common.Modal.impossible_complete"));break;case y["h"].SOLD_OUT:this.openAlert(l["a"].i18n.t("common.Modal.sold_out"));break;case y["h"].CLOSE:this.openAlert(l["a"].i18n.t("common.Modal.event_closed"));break;case y["h"].EXCLUSION:this.openAlert(l["a"].i18n.t("common.Modal.excluded_user"));break;case y["h"].NEED_AD_ID:case y["h"].NEED_WORLD_ID:case y["h"].INCORRECT_WORLD_ID:this.openAlert(l["a"].i18n.t("common.Modal.need_adid"));break}},e.prototype.isCPE=function(t){return t===y["i"].CPE||t===y["i"].CPE2},e.prototype.goStore=function(t){var e=T["a"].getInstallReferrer(),s=encodeURIComponent(e),i="";if(t){if(t&&t.indexOf("?")>-1)i=t+"&referrer="+s;else{var a=t.substring(t.length-1,t.length);i="/"===a?t+"?referrer="+s:t+"/?referrer="+s}location.href=i}else console&&console.log&&console.log("OfferwallDetail::goStore","url'value is null")},e.prototype.goOfferWallMain=function(){this.$router.push({path:"/"})},e.prototype.getCompleteList=function(){console.log("완료 록록 갱신")},e.prototype.openAlert=function(t){this.alertService.open({contents:l["a"].i18n.t(t)})},e.prototype.removeEvents=function(){window.removeEventListener("scroll",this.scrollEvent)},e.prototype.removeOfferwallInfo=function(){T["c"].setOfferwallInfo(null),this.alertService.close()},o["c"]([Object(c["b"])(u["a"].AlertService)],e.prototype,"alertService",void 0),o["c"]([Object(c["b"])(u["a"].UserService)],e.prototype,"userService",void 0),o["c"]([Object(c["b"])(u["a"].QuestListService)],e.prototype,"questListService",void 0),o["c"]([Object(c["b"])(u["a"].JoinService)],e.prototype,"joinService",void 0),e=o["c"]([Object(n["a"])({components:{BackButton:b,RewardItem:R}})],e),e}(r["a"]),q=x,k=q,j=Object(g["a"])(k,i,a,!1,null,null,null);e["default"]=j.exports}}]);